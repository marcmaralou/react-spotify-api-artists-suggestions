(this["webpackJsonpreact-spotify-dj-app"]=this["webpackJsonpreact-spotify-dj-app"]||[]).push([[0],{55:function(e,t,a){},56:function(e,t){},99:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(6),r=a.n(n),i=a(37),s=a.n(i),o=(a(55),a(9));var l=function(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(o.a)(a,2),i=r[0],s=r[1],l=Object(n.useState)(""),d=Object(o.a)(l,2),h=d[0],j=d[1],b=Object(n.useState)([]),u=Object(o.a)(b,2),m=u[0],p=u[1],g=Object(n.useState)(""),f=Object(o.a)(g,2),y=f[0],O=f[1],x=Object(n.useState)(""),k=Object(o.a)(x,2),v=k[0],w=k[1],N={C:0,"C#/Db":1,D:2,"D#/Eb":3,E:4,F:5,"F#/Gb":6,G:7,"G#/Ab":8,A:9,"A#/Bb":10,B:11},S=function(e){console.log(e.target.checked),1==e.target.checked?(console.log("1"),e.target.classList.add="green-glow"):e.target.classList.remove="green-glow"};return Object(c.jsx)("section",{className:"container form",onSubmit:function(e){e.preventDefault(),document.getElementById("loadingWheel").style.display="block",console.log(i,h,m,y,v),t({artist:i,track:h,genre:m,tempo:y,key:v})},children:Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"form-control artist",children:[Object(c.jsx)("label",{children:"Artist"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",name:"artists",placeholder:"i.e. Drake",onChange:function(e){s(e.target.value)}})]}),Object(c.jsxs)("div",{className:"form-control track",children:[Object(c.jsx)("label",{children:"Track"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",name:"tracks",placeholder:"i.e. Started from the Bottom",onChange:function(e){j(e.target.value)}})]}),Object(c.jsxs)("div",{className:"form-control genre",children:[Object(c.jsx)("label",{children:"Genre"}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{className:"boxes-container",children:["acoustic","afrobeat","alt-rock","alternative","ambient","anime","black-metal","bluegrass","blues","bossanova","brazil","breakbeat","british","cantopop","chicago-house","children","chill","classical","club","comedy","country","dance","dancehall","death-metal","deep-house","detroit-techno","disco","disney","drum-and-bass","dub","dubstep","edm","electro","electronic","emo","folk","forro","french","funk","garage","german","gospel","goth","grindcore","groove","grunge","guitar","happy","hard-rock","hardcore","hardstyle","heavy-metal","hip-hop","holidays","honky-tonk","house","idm","indian","indie","indie-pop","industrial","iranian","j-dance","j-idol","j-pop","j-rock","jazz","k-pop","kids","latin","latino","malay","mandopop","metal","metal-misc","metalcore","minimal-techno","movies","mpb","new-age","new-release","opera","pagode","party","philippines-opm","piano","pop","pop-film","post-dubstep","power-pop","progressive-house","psych-rock","punk","punk-rock","r-n-b","rainy-day","reggae","reggaeton","road-trip","rock","rock-n-roll","rockabilly","romance","sad","salsa","samba","sertanejo","show-tunes","singer-songwriter","ska","sleep","songwriter","soul","soundtracks","spanish","study","summer","swedish","synth-pop","tango","techno","trance","trip-hop","turkish","work-out","world-music"].map((function(e){return Object(c.jsxs)("label",{className:"chk-box-container",children:[e,Object(c.jsx)("input",{type:"checkbox",name:"genres",onChange:function(t){p([e]),S(t)}}),Object(c.jsx)("span",{className:"checkmark"})]})}))})]}),Object(c.jsxs)("div",{className:"form-control tempo",children:[Object(c.jsx)("label",{children:"Tempo"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",name:"target_key",placeholder:"130",onChange:function(e){O(e.target.value)}})]}),Object(c.jsxs)("div",{className:"form-control key",children:[Object(c.jsx)("label",{children:"Key"}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{className:"boxes-container key",children:Object.keys(N).map((function(e){return Object(c.jsxs)("label",{className:"chk-box-container",children:[e,Object(c.jsx)("input",{type:"radio",name:"keys",onChange:function(t){console.log(t.target),S(t),w(N[e])}}),Object(c.jsx)("span",{className:"checkmark"})]})}))})]}),Object(c.jsx)("input",{id:"submit",type:"submit",value:"SUBMIT"})]})})},d=a(48),h=a(38),j=a(39),b=a(49),u=a(46),m=a(47),p=function(e){Object(b.a)(a,e);var t=Object(u.a)(a);function a(e){var c;return Object(h.a)(this,a),(c=t.call(this,e)).state={vidPlayerObj:0},c}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.player=Object(m.a)(this.videoNode,this.props,(function(){})),this.player.on("click",(function(){if(e.player.paused())console.log("hello");else{var t=e.player.player().id();e.setState({vidPlayerObj:e.player.player().id()}),console.log(t),e.props.onPlay(parseInt(t))}}))}},{key:"componentWillUnmount",value:function(){this.player&&this.player.dispose()}},{key:"render",value:function(){var e=this;return Object(c.jsx)("div",{"data-vjs-player":!0,children:Object(c.jsx)("video",{id:this.props.recNum,ref:function(t){return e.videoNode=t},className:"video-js"})})}}]),a}(r.a.Component);var g=function(e){var t=e.pauseOther,a=e.recNum,n=e.track,r=e.artist,i=e.coverArtURL,s=e.preview,o={autoplay:!1,controls:!0,sources:[{src:"".concat(s),type:"audio/mpeg"}]};return Object(c.jsxs)("div",{className:"recommendation",children:[Object(c.jsx)("div",{className:"rec-number",children:a}),Object(c.jsx)("div",{className:"rec-img",children:Object(c.jsx)("img",{src:i,alt:"album cover for ".concat(n," by ").concat(r)})}),Object(c.jsxs)("div",{className:"rec-name",children:[Object(c.jsx)("h2",{className:"track-name",children:n}),Object(c.jsx)("p",{children:"by"}),Object(c.jsx)("h3",{className:"artists-name",children:r})]}),Object(c.jsx)("div",{className:"rec-preview",children:"null"!=s&&Object(c.jsx)(p,Object(d.a)({recNum:a,onPlay:t},o))})]})},f={margin:"auto",background:"rgba(241, 242, 243, 0)",display:"none",shapeRendering:"auto"},y=function(){return Object(c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",id:"loadingWheel",style:f,width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:[Object(c.jsx)("g",{transform:"rotate(0 50 50)",children:Object(c.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(c.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.9166666666666666s",repeatCount:"indefinite"})})}),Object(c.jsx)("g",{transform:"rotate(30 50 50)",children:Object(c.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(c.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.8333333333333334s",repeatCount:"indefinite"})})}),Object(c.jsx)("g",{transform:"rotate(60 50 50)",children:Object(c.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(c.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.75s",repeatCount:"indefinite"})})}),Object(c.jsx)("g",{transform:"rotate(90 50 50)",children:Object(c.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(c.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.6666666666666666s",repeatCount:"indefinite"})})}),Object(c.jsx)("g",{transform:"rotate(120 50 50)",children:Object(c.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(c.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5833333333333334s",repeatCount:"indefinite"})})}),Object(c.jsx)("g",{transform:"rotate(150 50 50)",children:Object(c.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(c.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5s",repeatCount:"indefinite"})})}),Object(c.jsx)("g",{transform:"rotate(180 50 50)",children:Object(c.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(c.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.4166666666666667s",repeatCount:"indefinite"})})}),Object(c.jsx)("g",{transform:"rotate(210 50 50)",children:Object(c.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(c.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.3333333333333333s",repeatCount:"indefinite"})})}),Object(c.jsx)("g",{transform:"rotate(240 50 50)",children:Object(c.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(c.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.25s",repeatCount:"indefinite"})})}),Object(c.jsx)("g",{transform:"rotate(270 50 50)",children:Object(c.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(c.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.16666666666666666s",repeatCount:"indefinite"})})}),Object(c.jsx)("g",{transform:"rotate(300 50 50)",children:Object(c.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(c.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.08333333333333333s",repeatCount:"indefinite"})})}),Object(c.jsx)("g",{transform:"rotate(330 50 50)",children:Object(c.jsx)("rect",{x:"47",y:"24",rx:"3",ry:"6",width:"6",height:"12",fill:"#1db954",children:Object(c.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"})})})]})},O=function(e){var t=e.recommendations,a=e.pauseOther;return Object(c.jsxs)("section",{className:"container recommendations",children:[console.log(t),0==t.length&&Object(c.jsx)(y,{}),t.map((function(e,t){return Object(c.jsx)(g,{pauseOther:a,recNum:t+1,track:JSON.stringify(e.name),artist:e.artists[0].name,coverArtURL:"".concat(e.album.images[1].url),preview:"".concat(e.preview_url)},t)}))]})},x=a(10),k=a.n(x);var v=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(""),s=Object(o.a)(i,2),d=(s[0],s[1]),h=Object(n.useState)(""),j=Object(o.a)(h,2),b=(j[0],j[1]),u=Object(n.useState)([]),m=Object(o.a)(u,2),p=m[0],g=m[1],f=Object(n.useState)({}),y=Object(o.a)(f,2),x=y[0],v=y[1],w=Object(n.useState)({obj:{},id:-1}),N=Object(o.a)(w,2),S=N[0],T=N[1],C="5895f98c24ce4792826ece2403169238",_="bce4f73f463f492c925b57164f0986d8";function B(e){return Math.floor(Math.random()*e)}return Object(n.useEffect)((function(){var e=x.artist,t=x.track,c=x.genre,n=""===x.tempo?"":"&target_tempo=".concat(x.tempo),i=(""===x.key||"&target_key=".concat(x.key),""),s="",o="";if(""!=e){if(0===Object.keys(x).length)return console.log("HERE");g([]),d(""),b(""),r(""),k()("https://accounts.spotify.com/api/token",{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(C+":"+_)},data:"grant_type=client_credentials",method:"POST"}).then((function(t){return r(t.data.access_token),o=t.data.access_token,k()("https://api.spotify.com/v1/search?q=".concat(e,"&type=artist&market=US&limit=").concat(1),{method:"GET",headers:{Authorization:"Bearer "+o}})})).catch((function(e){console.error(e)})).then((function(e){if(d(e.data.artists.items[0].id),i=e.data.artists.items[0].id,(c=0===c.length?e.data.artists.items[0].genres:c).length>3){for(var t=[];t.length<3;)if(c[B(c.length)]){var a=B(c.length);t.push(c[a]),c.splice(a,1)}c=t.join(",")}else c=c.join(",");return c=c.replace(/[ ,]/g,"%20"),k()("https://api.spotify.com/v1/artists/".concat(i,"/top-tracks?market=US"),{method:"GET",headers:{Authorization:"Bearer "+o}})})).catch((function(e){console.error(e)})).then((function(e){return console.log(e.data.tracks),b(e.data.tracks[0].id),s=e.data.tracks[0].id,console.log(c,i,s),console.log(a),k()("https://api.spotify.com/v1/recommendations?limit=50&market=US&seed_artists=".concat(i,"&seed_genres=").concat(c,"&seed_tracks=").concat(s,"&min_popularity=").concat(20).concat(n),{method:"GET",headers:{Authorization:"Bearer "+o}})})).catch((function(e){console.error(e)})).then((function(e){g(e.data.tracks)})).catch((function(e){console.error(e)}))}else if(""==e&&""!=t){if(0===Object.keys(x).length)return console.log("HERE");g([]),d(""),b(""),r(""),k()("https://accounts.spotify.com/api/token",{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa(C+":"+_)},data:"grant_type=client_credentials",method:"POST"}).then((function(e){return r(e.data.access_token),o=e.data.access_token,k()("https://api.spotify.com/v1/search?q=".concat(t,"&type=track&market=US&limit=").concat(1),{method:"GET",headers:{Authorization:"Bearer "+o}})})).catch((function(e){console.error(e)})).then((function(e){if(console.log(e.data),i=e.data.tracks.items[0].album.artists[0].id,s=e.data.tracks.items[0].id,c=0===c.length?e.data.artists.items[0].genres:c,console.log(c),c.length>3){for(var t=[];t.length<3;)if(c[B(c.length)]){var a=B(c.length);t.push(c[a]),c.splice(a,1)}c=t.join(",")}else c=c.join(",");return c=c.replace(/[ ,]/g,"%20"),k()("https://api.spotify.com/v1/recommendations?limit=50&market=US&seed_artists=".concat(i,"&seed_genres=").concat(c,"&seed_tracks=").concat(s,"&min_popularity=").concat(20).concat(n),{method:"GET",headers:{Authorization:"Bearer "+o}})})).catch((function(e){console.error(e)})).then((function(e){g(e.data.tracks)})).catch((function(e){console.error(e)}))}}),[x]),Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("h1",{id:"heading",children:"Song Recommender"}),Object(c.jsx)(l,{onSubmit:function(e){v(e),console.log(x)}}),Object(c.jsx)(O,{pauseOther:function(e){-1!=S.id?e!=S.id&&(S.obj.pause(),T({obj:document.getElementById("".concat(e,"_html5_api")),id:e})):T({obj:document.getElementById("".concat(e,"_html5_api")),id:e})},recommendations:p})]})},w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,100)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),r(e),i(e)}))};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(v,{})}),document.getElementById("root")),w()}},[[99,1,2]]]);
//# sourceMappingURL=main.f0e9025e.chunk.js.map